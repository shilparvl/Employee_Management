apiVersion: apps/v1
kind: Deployment
metadata:
  name: emp-api
spec:
  replicas: 3
  selector:
    matchLabels:
      app: emp-api
  template:
    metadata:
      labels:
        app: emp-api
spec:
  containers:
  - name: emp-api
    image: <your-repo>/emp-api:latest
    ports:
    - containerPort: 80
  env:
  - name: DATABASE_URL
    valueFrom:
      secretKeyRef:
        name: db-secret
        key: url
  - name: REDIS_URL
    valueFrom:
      secretKeyRef:
        name: redis-secret
        key: url